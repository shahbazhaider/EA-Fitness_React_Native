{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\Work\\\\Anees\\\\EA Fitness\\\\app\\\\application\\\\components\\\\PostRating.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport * as firebase from 'firebase';\nimport View from \"react-native-web/dist/exports/View\";\nimport StarRating from 'react-native-star-rating';\n\nvar starImage = require(\"../../assets/images/star.png\");\n\nvar PostRating = function (_Component) {\n  _inherits(PostRating, _Component);\n\n  var _super = _createSuper(PostRating);\n\n  function PostRating(props) {\n    var _this;\n\n    _classCallCheck(this, PostRating);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      rating: 0\n    };\n    var postId = props.postId;\n    _this.commentsRef = firebase.database().ref(\"postComments/\" + postId);\n    return _this;\n  }\n\n  _createClass(PostRating, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.commentsRef.on(\"child_added\", function (snapshot) {\n        _this2.commentsRef.on(\"value\", function (snap) {\n          var comments = [];\n          snap.forEach(function (row) {\n            comments.push(parseInt(row.val().rating));\n          });\n\n          _this2.setState({\n            rating: comments.reduce(function (previous, current) {\n              return previous + current;\n            }, 0) / comments.length\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var rating = this.state.rating;\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 1\n        }\n      }, React.createElement(StarRating, {\n        ref: \"rating\",\n        disabled: true,\n        maxStars: 5,\n        emptyStar: require(\"../../assets/images/empty-star.png\"),\n        fullStar: require(\"../../assets/images/star.png\"),\n        halfStar: require(\"../../assets/images/half-star.png\"),\n        iconSet: 'Ionicons',\n        rating: rating,\n        containerStyle: {\n          width: 100\n        },\n        starSize: 20,\n        emptyStarColor: '#f1c40f',\n        fullStarColor: '#f1c40f',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 7\n        }\n      }));\n    }\n  }]);\n\n  return PostRating;\n}(Component);\n\nexport { PostRating as default };","map":{"version":3,"sources":["F:/Work/Anees/EA Fitness/app/application/components/PostRating.js"],"names":["React","Component","firebase","StarRating","starImage","require","PostRating","props","state","rating","postId","commentsRef","database","ref","on","snapshot","snap","comments","forEach","row","push","parseInt","val","setState","reduce","previous","current","length","width"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;;AAEA,OAAOC,UAAP,MAAuB,0BAAvB;;AAGA,IAAMC,SAAS,GAAGC,OAAO,gCAAzB;;IAEqBC,U;;;;;AACpB,sBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AACnB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,MAAM,EAAE;AADI,KAAb;AAFmB,QAKZC,MALY,GAKFH,KALE,CAKZG,MALY;AAMnB,UAAKC,WAAL,GAAmBT,QAAQ,CAACU,QAAT,GAAoBC,GAApB,mBAAwCH,MAAxC,CAAnB;AANmB;AAOnB;;;;WAED,6BAAqB;AAAA;;AACpB,WAAKC,WAAL,CAAiBG,EAAjB,CAAoB,aAApB,EAAmC,UAAAC,QAAQ,EAAI;AAC9C,QAAA,MAAI,CAACJ,WAAL,CAAiBG,EAAjB,CAAoB,OAApB,EAA6B,UAAAE,IAAI,EAAI;AACpC,cAAIC,QAAQ,GAAG,EAAf;AACAD,UAAAA,IAAI,CAACE,OAAL,CAAa,UAAAC,GAAG,EAAI;AACnBF,YAAAA,QAAQ,CAACG,IAAT,CAAcC,QAAQ,CAACF,GAAG,CAACG,GAAJ,GAAUb,MAAX,CAAtB;AACA,WAFD;;AAIA,UAAA,MAAI,CAACc,QAAL,CAAc;AACbd,YAAAA,MAAM,EAAEQ,QAAQ,CAACO,MAAT,CAAgB,UAACC,QAAD,EAAWC,OAAX;AAAA,qBAAuBD,QAAQ,GAAGC,OAAlC;AAAA,aAAhB,EAA2D,CAA3D,IAAgET,QAAQ,CAACU;AADpE,WAAd;AAOA,SAbD;AAcA,OAfD;AAgBA;;;WAED,kBAAU;AAAA,UACFlB,MADE,GACQ,KAAKD,KADb,CACFC,MADE;AAET,aACF,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACM,oBAAC,UAAD;AACJ,QAAA,GAAG,EAAC,QADA;AAEI,QAAA,QAAQ,EAAE,IAFd;AAGI,QAAA,QAAQ,EAAE,CAHd;AAII,QAAA,SAAS,EAAEJ,OAAO,sCAJtB;AAKI,QAAA,QAAQ,EAAEA,OAAO,gCALrB;AAMI,QAAA,QAAQ,EAAEA,OAAO,qCANrB;AAOI,QAAA,OAAO,EAAE,UAPb;AAQI,QAAA,MAAM,EAAEI,MARZ;AASI,QAAA,cAAc,EAAE;AAACmB,UAAAA,KAAK,EAAE;AAAR,SATpB;AAUI,QAAA,QAAQ,EAAE,EAVd;AAWM,QAAA,cAAc,EAAE,SAXtB;AAYM,QAAA,aAAa,EAAE,SAZrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADN,CADE;AAkBA;;;;EAjDsC3B,S;;SAAnBK,U","sourcesContent":["import React, {Component} from 'react';\nimport * as firebase from 'firebase';\nimport {View} from \"react-native\";\nimport StarRating from 'react-native-star-rating';\n\n\nconst starImage = require('../../assets/images/star.png')\n\nexport default class PostRating extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\trating: 0\n\t\t};\n\t\tconst {postId} = props;\n\t\tthis.commentsRef = firebase.database().ref(`postComments/${postId}`);\n\t}\n\n\tcomponentDidMount () {\n\t\tthis.commentsRef.on(\"child_added\", snapshot => {\n\t\t\tthis.commentsRef.on(\"value\", snap => {\n\t\t\t\tlet comments = [];\n\t\t\t\tsnap.forEach(row => {\n\t\t\t\t\tcomments.push(parseInt(row.val().rating));\n\t\t\t\t});\n\n\t\t\t\tthis.setState({\n\t\t\t\t\trating: comments.reduce((previous, current) => previous + current, 0) / comments.length\n\t\t\t\t});\n\n\t\t\t\t/*this.refs.rating.setCurrentRating(\n\t\t\t\t\tcomments.reduce((previous, current) => previous + current, 0) / comments.length\n\t\t\t\t);*/\n\t\t\t})\n\t\t});\n\t}\n\n\trender () {\n\t\tconst {rating} = this.state;\n\t\treturn (\n<View>\n      <StarRating\n\t\tref=\"rating\"\n          disabled={true}\n          maxStars={5}\n          emptyStar={require('../../assets/images/empty-star.png')}\n          fullStar={require('../../assets/images/star.png')}\n          halfStar={require('../../assets/images/half-star.png')}\n          iconSet={'Ionicons'}\n          rating={rating}\n          containerStyle={{width: 100}}\n          starSize={20}\n            emptyStarColor={'#f1c40f'}\n            fullStarColor={'#f1c40f'}\n          />\n</View>\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}