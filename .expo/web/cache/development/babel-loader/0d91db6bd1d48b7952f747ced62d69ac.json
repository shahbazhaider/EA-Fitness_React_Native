{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\Work\\\\Anees\\\\EA Fitness\\\\app\\\\application\\\\forms\\\\PostForm.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { options, Comment } from \"./Comment\";\nimport t from 'tcomb-form-native';\nvar Form = t.form.Form;\nimport View from \"react-native-web/dist/exports/View\";\nimport { Button, Text } from 'native-base';\nimport * as firebase from 'firebase';\n\nvar styles = require(\"../../assets/files/Styles\");\n\nvar PostForm = function (_Component) {\n  _inherits(PostForm, _Component);\n\n  var _super = _createSuper(PostForm);\n\n  function PostForm() {\n    var _this;\n\n    _classCallCheck(this, PostForm);\n\n    _this = _super.call(this);\n    var user = firebase.auth().currentUser;\n    _this.state = {\n      comment: {\n        comment: '',\n        rating: 1,\n        user: user.displayName\n      }\n    };\n    return _this;\n  }\n\n  _createClass(PostForm, [{\n    key: \"addComment\",\n    value: function addComment() {\n      var _this2 = this;\n\n      var user = firebase.auth().currentUser;\n      var validate = this.refs.form.getValue();\n\n      if (validate) {\n        var data = {};\n\n        var comment = _extends({}, validate);\n\n        var ref = firebase.database().ref().child('postComments');\n        var key = ref.push().key;\n        data[this.props.postId + \"/\" + key] = comment;\n        ref.update(data).then(function () {\n          _this2.setState(function (prevState, props) {\n            return {\n              comment: {\n                comment: '',\n                rating: 1,\n                user: user.displayName\n              }\n            };\n          });\n        });\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(comment) {\n      this.setState({\n        comment: comment\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var comment = this.state.comment;\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 6\n        }\n      }, React.createElement(Form, {\n        ref: \"form\",\n        type: Comment,\n        options: options,\n        value: comment,\n        onChange: function onChange(v) {\n          return _this3.onChange(v);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }\n      }), React.createElement(Button, {\n        block: true,\n        onPress: this.addComment.bind(this),\n        style: styles.postCommentButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 5\n        }\n      }, React.createElement(Text, {\n        style: styles.postCommentText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 5\n        }\n      }, \"Submit\")));\n    }\n  }]);\n\n  return PostForm;\n}(Component);\n\nexport { PostForm as default };","map":{"version":3,"sources":["F:/Work/Anees/EA Fitness/app/application/forms/PostForm.js"],"names":["React","Component","options","Comment","t","Form","form","Button","Text","firebase","styles","require","PostForm","user","auth","currentUser","state","comment","rating","displayName","validate","refs","getValue","data","ref","database","child","key","push","props","postId","update","then","setState","prevState","v","onChange","addComment","bind","postCommentButton","postCommentText"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {options, Comment} from './Comment';\nimport t from 'tcomb-form-native';\nconst Form = t.form.Form;\nimport {View} from \"react-native\";\nimport {Button, Text} from 'native-base';\nimport * as firebase from 'firebase';\n\nvar styles = require('../../assets/files/Styles');\n\nexport default class PostForm extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tvar user = firebase.auth().currentUser;\n\t\tthis.state = {\n\t\t\tcomment: {\n\t\t\t\tcomment: '',\n\t\t\t\trating: 1,\n\t\t\t\tuser: user.displayName,\n\t\t\t}\n\t\t};\n\t}\n\n\taddComment () {\n\t\tvar user = firebase.auth().currentUser;\n\t\tconst validate = this.refs.form.getValue();\n\t\tif(validate) {\n\t\t\tlet data = {};\n\t\t\tlet comment = Object.assign({}, validate);\n\t\t\tlet ref = firebase.database().ref().child('postComments');\n\t\t\tconst key = ref.push().key;\n\n\t\t\tdata[`${this.props.postId}/${key}`] = comment;\n\n\t\t\tref.update(data).then(() => {\n\t\t\t\tthis.setState((prevState, props) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcomment: {\n\t\t\t\t\t\t\tcomment: '',\n\t\t\t\t\t\t\trating: 1,\n\t\t\t\t\t\t\tuser: user.displayName,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t}\n\t}\n\n\tonChange (comment) {\n\t\tthis.setState({comment});\n\t}\n\n\trender () {\n\t\tconst {comment} = this.state;\n\t\treturn (\n\t\t\t\t\t<View>\n\t\t\t\t\t<Form\n\t\t\t\t\t\tref=\"form\"\n\t\t\t\t\t\ttype={Comment}\n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tvalue={comment}\n\t\t\t\t\t\tonChange={(v) => this.onChange(v)}\n\t\t\t\t\t/>\n\t\t\t\t<Button block onPress={this.addComment.bind(this)} style={styles.postCommentButton}>\n\t\t\t\t<Text style={styles.postCommentText}>Submit</Text>\n\t\t\t\t</Button>\n\n\t\t\t\t</View>\n\n\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}